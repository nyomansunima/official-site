# Check the web performace using
# lighthouse ci
# allow to show the page result for seo, performace, compatibility
#
# ******** NOTE *********
# Lighthouse only check your web result and platform

name: Lighthouse

on:
  workflow_dispatch:
  workflow_run:
    workflows: ['Web Production']
    types:
      - completed
  push:
    branches: ['main']
  pull_request:
    branches: ['main']

jobs:
  lighthouse:
    name: Lighthouse Testing the web on Node ${{matrix.node}}
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Audit URLs using Lighthouse
        uses: treosh/lighthouse-ci-action@v12
        with:
          urls: |
            https://nyomansunima.one
          budgetPath: ./lighthouse/budget.json
          uploadArtifacts: true
          temporaryPublicStorage: true
          runs: 3
